(()=>{"use strict";document.getElementById("insert-node-start"),document.getElementById("insert-node-end"),document.getElementById("ll-container"),new(function(){function e(){var e=this;this.head=null,this.removeNodeBtn=$("#remove-node-btn")[0],this.sizeDisplay=$("#size-display")[0],this.llContainer=$("#ll-container")[0],this.insertNodeAtIndexBtn=$("#insert-at-location")[0],this.size=$(this.llContainer).children(".node_container").length,this.sizeDisplay.textContent=this.size.toString(),$(this.insertNodeAtIndexBtn).on("click",(function(n){n.stopPropagation();var t=$("#insert-value-input"),i=parseInt(t.val()),o=$("#insert-index-input"),r=parseInt(o.val());e.insertAtIndex(i,r)})),$(this.removeNodeBtn).on("click",(function(n){try{n.stopPropagation();var t=parseInt($("#remove-index-input").val()),i=parseInt($("#remove-value-input").val());t&&e.removeFrom(t),i&&e.removeElement(i)}catch(e){console.log(e)}}))}return e.prototype.updateSize=function(){this.sizeDisplay.textContent=this.size.toString()},e.prototype.insertAtIndex=function(e,n){var t=this;if(!e)throw new Error("Invalid value");try{if(n>=2)this.walkthroughAnimation(n,(function(){var i=t.createLLDomNode(e);if(0===$(t.llContainer).children(".node_container").length)$(t.llContainer).children().first().after(i);else{if(n<0||n>t.size+1)throw new Error("invalid linkedList index");$(t.llContainer.children[0===n?1:n]).before(i)}t.size++,t.updateSize()}));else{var i=this.createLLDomNode(e);if(0===$(this.llContainer).children(".node_container").length)$(this.llContainer).children().first().after(i);else{if(n<0||n>this.size+1)throw new Error("invalid linkedList index");$(this.llContainer.children[0===n?1:n]).before(i)}this.size++,this.updateSize()}}catch(e){console.log(e)}},e.prototype.walkthroughAnimation=function(e,n){var t=$(".walkthrough-animation"),i=!1;t.each((function(t){if(e-1===t&&(i=!0),!i){var o=$(this);o.delay(800*t).animate({transform:"scale(1.2)",rotate:"5deg"},200,(function(){o.animate({transform:"scale(1)",rotate:"0deg"},200,(function(){console.log("insertionIndex = "+(e-1)),console.log("animationIndex = "+(t+1)),e-1===t+1&&n()}))}))}}))},e.prototype.removeElement=function(e){var n=$(this.llContainer).find("*:contains('"+e+"')").filter((function(){return 0===$(this).children().length}));console.log(n.parent().parent().parent().remove()),this.size--,this.updateSize()},e.prototype.removeFrom=function(e){if(e&&e>0){if($(this.llContainer).children().length<=2||e>this.size)throw new Error("there are no nodes inserted yet");$(this.llContainer).children().eq(e).remove(),this.size--,this.updateSize()}},e.prototype.createLLDomNode=function(e){var n=$("<div>").addClass("node_container walkthrough-animation"),t=$("<div>").addClass("node_inner_container"),i=$("<div>").addClass("node_data"),o=$("<p>").text(e.toString());i.append(o);var r=$("<div>").addClass("node_next_container"),a=$("<div>").addClass("node_next"),s=$("<div>").addClass("arrow-container"),l=$("<div>").addClass("arrow"),d=$("<div>").addClass("line");return s.append(l,d),a.append(s),r.append(a),t.append(i,r),n.append(t),n},e}())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVE1RCxFQUFFLFNBQVNtRCxTQUFTLFNBQzVCVSxFQUFPN0QsRUFBRSxTQUFTbUQsU0FBUyxRQU9qQyxPQUxBUSxFQUFlSCxPQUFPSSxFQUFPQyxHQUM3QkgsRUFBU0YsT0FBT0csR0FDaEJGLEVBQWNELE9BQU9FLEdBQ3JCTixFQUFlSSxPQUFPSCxFQUFVSSxHQUNoQ1AsRUFBY00sT0FBT0osR0FDZEYsQ0FDWCxFQUNKLEVBdExBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLXN0cnVjdHVyZS12aXN1YWxpemVyLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFkZE5vZGVCdG5TdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5zZXJ0LW5vZGUtc3RhcnRcIik7XHJcbmNvbnN0IGFkZE5vZGVCdG5FbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluc2VydC1ub2RlLWVuZFwiKTtcclxuY29uc3QgbGlua2VkTGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGwtY29udGFpbmVyXCIpO1xyXG5cclxuaW50ZXJmYWNlIE5vZGVUeXBlIHtcclxuICAgIHZhbHVlOiBudW1iZXI7XHJcbiAgICBuZXh0OiBudWxsIHwgTm9kZVR5cGVcclxufVxyXG5cclxuY2xhc3MgTExOb2RlIGltcGxlbWVudHMgTm9kZVR5cGUge1xyXG4gICAgdmFsdWU6IG51bWJlclxyXG4gICAgbmV4dDogbnVsbCB8IE5vZGVUeXBlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZhbDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbFxyXG4gICAgICAgIHRoaXMubmV4dCA9IG51bGxcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTGlua2VkTGlzdCB7XHJcbiAgICBoZWFkOiBMTE5vZGUgfCBudWxsXHJcbiAgICBzaXplOiBudW1iZXJcclxuICAgIGxsQ29udGFpbmVyXHJcbiAgICBpbnNlcnROb2RlQXRJbmRleEJ0bjogSFRNTEVsZW1lbnRcclxuICAgIHJlbW92ZU5vZGVCdG46IEhUTUxCdXR0b25FbGVtZW50XHJcbiAgICBzaXplRGlzcGxheTogSFRNTFNwYW5FbGVtZW50XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmhlYWQgPSBudWxsXHJcbiAgICAgICAgdGhpcy5yZW1vdmVOb2RlQnRuID0gJChcIiNyZW1vdmUtbm9kZS1idG5cIilbMF0gYXMgSFRNTEJ1dHRvbkVsZW1lbnRcclxuICAgICAgICB0aGlzLnNpemVEaXNwbGF5ID0gJChcIiNzaXplLWRpc3BsYXlcIilbMF0gYXMgSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgICAgIC8vIFNlbGVjdCBhbGwgZWxlbWVudHMgd2l0aCBjbGFzcyBuYW1lICdub2RlX2NvbnRhaW5lcicgaW5zaWRlIHRoZSBkaXYgd2l0aCBpZCAnbGwtY29udGFpbmVyJ1xyXG4gICAgICAgIC8vIFNlbGVjdGluZyBsbENvbnRhaW5lciB1c2luZyBqUXVlcnlcclxuICAgICAgICB0aGlzLmxsQ29udGFpbmVyID0gJChcIiNsbC1jb250YWluZXJcIilbMF0gYXMgSFRNTERpdkVsZW1lbnQ7IC8vIFVzaW5nIFswXSB0byBhY2Nlc3MgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGpRdWVyeSBvYmplY3QgYXMgYSBwbGFpbiBET00gZWxlbWVudFxyXG4gICAgICAgIC8vIFNlbGVjdGluZyBpbnNlcnROb2RlQXRJbmRleEJ0biB1c2luZyBqUXVlcnlcclxuICAgICAgICB0aGlzLmluc2VydE5vZGVBdEluZGV4QnRuID0gJChcIiNpbnNlcnQtYXQtbG9jYXRpb25cIilbMF07IC8vIFVzaW5nIFswXSB0byBhY2Nlc3MgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGpRdWVyeSBvYmplY3QgYXMgYSBwbGFpbiBET00gZWxlbWVudFxyXG4gICAgICAgIHRoaXMuc2l6ZSA9ICQodGhpcy5sbENvbnRhaW5lcikuY2hpbGRyZW4oJy5ub2RlX2NvbnRhaW5lcicpLmxlbmd0aFxyXG4gICAgICAgIHRoaXMuc2l6ZURpc3BsYXkudGV4dENvbnRlbnQgPSB0aGlzLnNpemUudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgLy8gQWRkaW5nIGV2ZW50IGxpc3RlbmVyIHVzaW5nIGpRdWVyeVxyXG4gICAgICAgICQodGhpcy5pbnNlcnROb2RlQXRJbmRleEJ0bikub24oJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVJbnB1dCA9ICQoXCIjaW5zZXJ0LXZhbHVlLWlucHV0XCIpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KHZhbHVlSW5wdXQudmFsKCkgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXhJbnB1dCA9ICQoXCIjaW5zZXJ0LWluZGV4LWlucHV0XCIpO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGluZGV4SW5wdXQudmFsKCkgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgdGhpcy5pbnNlcnRBdEluZGV4KHZhbHVlLCBpbmRleCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJCh0aGlzLnJlbW92ZU5vZGVCdG4pLm9uKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBieUluZGV4ID0gcGFyc2VJbnQoJChcIiNyZW1vdmUtaW5kZXgtaW5wdXRcIikudmFsKCkgYXMgc3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYnlWYWx1ZSA9IHBhcnNlSW50KCQoXCIjcmVtb3ZlLXZhbHVlLWlucHV0XCIpLnZhbCgpIGFzIHN0cmluZylcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnlJbmRleCkgdGhpcy5yZW1vdmVGcm9tKGJ5SW5kZXgpXHJcbiAgICAgICAgICAgICAgICBpZiAoYnlWYWx1ZSkgdGhpcy5yZW1vdmVFbGVtZW50KGJ5VmFsdWUpXHJcblxyXG5cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTaXplKCkge1xyXG4gICAgICAgIHRoaXMuc2l6ZURpc3BsYXkudGV4dENvbnRlbnQgPSB0aGlzLnNpemUudG9TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gYWRkcyBhbiBub2RlIHRvIHRoZSBlbmQgb2YgdGhlIGxpc3RcclxuICAgIGluc2VydEF0SW5kZXgodmFsdWU6IG51bWJlciwgaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWVcIilcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YWxrdGhyb3VnaEFuaW1hdGlvbihpbmRleCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvbU5vZGUgPSB0aGlzLmNyZWF0ZUxMRG9tTm9kZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZXNJbkxMID0gJCh0aGlzLmxsQ29udGFpbmVyKS5jaGlsZHJlbignLm5vZGVfY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLy8gaWYgbGVuZ3RoIGlzIDIsIHRoZXJlIGlzIG9ubHkgaGVhZCBhbmQgdGFpbFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub2Rlc0luTEwubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcy5sbENvbnRhaW5lcikuY2hpbGRyZW4oKS5maXJzdCgpLmFmdGVyKGRvbU5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPiB0aGlzLnNpemUgKyAxKSB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGxpbmtlZExpc3QgaW5kZXhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcy5sbENvbnRhaW5lci5jaGlsZHJlbltpbmRleCA9PT0gMCA/IDEgOiBpbmRleF0pLmJlZm9yZShkb21Ob2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaXplKytcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRvbU5vZGUgPSB0aGlzLmNyZWF0ZUxMRG9tTm9kZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub2Rlc0luTEwgPSAkKHRoaXMubGxDb250YWluZXIpLmNoaWxkcmVuKCcubm9kZV9jb250YWluZXInKTtcclxuICAgICAgICAgICAgICAgIC8vIC8vIGlmIGxlbmd0aCBpcyAyLCB0aGVyZSBpcyBvbmx5IGhlYWQgYW5kIHRhaWxcclxuICAgICAgICAgICAgICAgIGlmIChub2Rlc0luTEwubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzLmxsQ29udGFpbmVyKS5jaGlsZHJlbigpLmZpcnN0KCkuYWZ0ZXIoZG9tTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPiB0aGlzLnNpemUgKyAxKSB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGxpbmtlZExpc3QgaW5kZXhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzLmxsQ29udGFpbmVyLmNoaWxkcmVuW2luZGV4ID09PSAwID8gMSA6IGluZGV4XSkuYmVmb3JlKGRvbU5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaXplKytcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgd2Fsa3Rocm91Z2hBbmltYXRpb24oaW5zZXJ0aW9uSW5kZXg6IG51bWJlciwgaW5zZXJ0Tm9kZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIC8vIFNlbGVjdCBhbGwgc2libGluZyBlbGVtZW50c1xyXG4gICAgICAgIHZhciAkc2libGluZ3MgPSAkKFwiLndhbGt0aHJvdWdoLWFuaW1hdGlvblwiKTtcclxuICAgICAgICBsZXQgc3RvcEFuaW1hdGlvbiA9IGZhbHNlXHJcbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIGVhY2ggc2libGluZyBlbGVtZW50XHJcbiAgICAgICAgJHNpYmxpbmdzLmVhY2goZnVuY3Rpb24gKGFuaW1hdGlvbkluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChpbnNlcnRpb25JbmRleCAtIDEgPT09IGFuaW1hdGlvbkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wQW5pbWF0aW9uID0gdHJ1ZVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFzdG9wQW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJGN1cnJlbnRFbGVtZW50ID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIC8vIERlZmluZSB0aGUgYW5pbWF0aW9uXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICRjdXJyZW50RWxlbWVudC5kZWxheShhbmltYXRpb25JbmRleCAqIDgwMCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2NhbGUgdGhlIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICBcInRyYW5zZm9ybVwiOiBcInNjYWxlKDEuMilcIiwgLy8gU2NhbGUgZmFjdG9yIGNhbiBiZSBhZGp1c3RlZCBhcyBuZWVkZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBSb3RhdGUgdGhlIGVsZW1lbnQgc2xpZ2h0bHkgdG8gb25lIHNpZGVcclxuICAgICAgICAgICAgICAgICAgICBcInJvdGF0ZVwiOiBcIjVkZWdcIiAvLyBBbmdsZSBjYW4gYmUgYWRqdXN0ZWQgYXMgbmVlZGVkXHJcbiAgICAgICAgICAgICAgICB9LCAyMDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBbmltYXRpb24gY29tcGxldGUgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAvLyBBbmltYXRlIGJhY2sgdG8gb3JpZ2luYWwgc3R5bGVzXHJcbiAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnRFbGVtZW50LmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zZm9ybVwiOiBcInNjYWxlKDEpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicm90YXRlXCI6IFwiMGRlZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW5zZXJ0aW9uSW5kZXggPSBcIiArIChpbnNlcnRpb25JbmRleCAtIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImFuaW1hdGlvbkluZGV4ID0gXCIgKyAoYW5pbWF0aW9uSW5kZXggKyAxKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc2VydGlvbkluZGV4IC0gMSA9PT0gYW5pbWF0aW9uSW5kZXggKyAxKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0Tm9kZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVFbGVtZW50KGVsZW1lbnRWYWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdmFyIGZvdW5kRWxlbWVudCA9ICQodGhpcy5sbENvbnRhaW5lcikuZmluZChcIio6Y29udGFpbnMoJ1wiICsgZWxlbWVudFZhbHVlICsgXCInKVwiKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMDsgLy8gRmlsdGVyIHRvIHNlbGVjdCBvbmx5IHRoZSBpbm5lcm1vc3QgZWxlbWVudHNcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhmb3VuZEVsZW1lbnQucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucmVtb3ZlKCkpXHJcbiAgICAgICAgdGhpcy5zaXplLS07XHJcbiAgICAgICAgdGhpcy51cGRhdGVTaXplKClcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmVtb3ZlRnJvbShpbmRleDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGlmICghaW5kZXgpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBsbENoaWxkcmVuID0gJCh0aGlzLmxsQ29udGFpbmVyKS5jaGlsZHJlbigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxsQ2hpbGRyZW4ubGVuZ3RoIDw9IDIgfHwgaW5kZXggPiB0aGlzLnNpemUpIHRocm93IG5ldyBFcnJvcihcInRoZXJlIGFyZSBubyBub2RlcyBpbnNlcnRlZCB5ZXRcIilcclxuXHJcbiAgICAgICAgICAgICQodGhpcy5sbENvbnRhaW5lcikuY2hpbGRyZW4oKS5lcShpbmRleCkucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNpemUtLVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUxMRG9tTm9kZSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtYWluIGNvbnRhaW5lciBkaXZcclxuICAgICAgICBjb25zdCBub2RlQ29udGFpbmVyID0gJChcIjxkaXY+XCIpLmFkZENsYXNzKFwibm9kZV9jb250YWluZXIgd2Fsa3Rocm91Z2gtYW5pbWF0aW9uXCIpO1xyXG4gICAgICAgIC8vIENyZWF0ZSBpbm5lciBjb250YWluZXIgZGl2XHJcbiAgICAgICAgY29uc3QgaW5uZXJDb250YWluZXIgPSAkKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJub2RlX2lubmVyX2NvbnRhaW5lclwiKTtcclxuICAgICAgICAvLyBDcmVhdGUgbm9kZSBkYXRhIGRpdlxyXG4gICAgICAgIGNvbnN0IG5vZGVEYXRhID0gJChcIjxkaXY+XCIpLmFkZENsYXNzKFwibm9kZV9kYXRhXCIpO1xyXG4gICAgICAgIGNvbnN0IHBhcmFncmFwaCA9ICQoXCI8cD5cIikudGV4dCh2YWx1ZS50b1N0cmluZygpKTtcclxuICAgICAgICBub2RlRGF0YS5hcHBlbmQocGFyYWdyYXBoKTtcclxuICAgICAgICAvLyBDcmVhdGUgbmV4dCBjb250YWluZXIgZGl2XHJcbiAgICAgICAgY29uc3QgbmV4dENvbnRhaW5lciA9ICQoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcIm5vZGVfbmV4dF9jb250YWluZXJcIik7XHJcbiAgICAgICAgLy8gQ3JlYXRlIG5leHQgbm9kZSBkaXZcclxuICAgICAgICBjb25zdCBuZXh0Tm9kZSA9ICQoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcIm5vZGVfbmV4dFwiKTtcclxuICAgICAgICAvLyBDcmVhdGUgYXJyb3cgY29udGFpbmVyIGRpdlxyXG4gICAgICAgIGNvbnN0IGFycm93Q29udGFpbmVyID0gJChcIjxkaXY+XCIpLmFkZENsYXNzKFwiYXJyb3ctY29udGFpbmVyXCIpO1xyXG4gICAgICAgIC8vIENyZWF0ZSBhcnJvdyBkaXZcclxuICAgICAgICBjb25zdCBhcnJvdyA9ICQoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcImFycm93XCIpO1xyXG4gICAgICAgIGNvbnN0IGxpbmUgPSAkKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJsaW5lXCIpO1xyXG4gICAgICAgIC8vIEFwcGVuZCBlbGVtZW50cyB0byB0aGVpciByZXNwZWN0aXZlIHBhcmVudHNcclxuICAgICAgICBhcnJvd0NvbnRhaW5lci5hcHBlbmQoYXJyb3csIGxpbmUpO1xyXG4gICAgICAgIG5leHROb2RlLmFwcGVuZChhcnJvd0NvbnRhaW5lcik7XHJcbiAgICAgICAgbmV4dENvbnRhaW5lci5hcHBlbmQobmV4dE5vZGUpO1xyXG4gICAgICAgIGlubmVyQ29udGFpbmVyLmFwcGVuZChub2RlRGF0YSwgbmV4dENvbnRhaW5lcik7XHJcbiAgICAgICAgbm9kZUNvbnRhaW5lci5hcHBlbmQoaW5uZXJDb250YWluZXIpO1xyXG4gICAgICAgIHJldHVybiBub2RlQ29udGFpbmVyO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBsbCA9IG5ldyBMaW5rZWRMaXN0KCk7XHJcbiJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidGhpcyIsImhlYWQiLCJyZW1vdmVOb2RlQnRuIiwiJCIsInNpemVEaXNwbGF5IiwibGxDb250YWluZXIiLCJpbnNlcnROb2RlQXRJbmRleEJ0biIsInNpemUiLCJjaGlsZHJlbiIsImxlbmd0aCIsInRleHRDb250ZW50IiwidG9TdHJpbmciLCJvbiIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJ2YWx1ZUlucHV0IiwidmFsdWUiLCJwYXJzZUludCIsInZhbCIsImluZGV4SW5wdXQiLCJpbmRleCIsImluc2VydEF0SW5kZXgiLCJieUluZGV4IiwiYnlWYWx1ZSIsInJlbW92ZUZyb20iLCJyZW1vdmVFbGVtZW50IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwidXBkYXRlU2l6ZSIsIkVycm9yIiwid2Fsa3Rocm91Z2hBbmltYXRpb24iLCJkb21Ob2RlIiwiY3JlYXRlTExEb21Ob2RlIiwiZmlyc3QiLCJhZnRlciIsImJlZm9yZSIsImluc2VydGlvbkluZGV4IiwiaW5zZXJ0Tm9kZSIsIiRzaWJsaW5ncyIsInN0b3BBbmltYXRpb24iLCJlYWNoIiwiYW5pbWF0aW9uSW5kZXgiLCIkY3VycmVudEVsZW1lbnQiLCJkZWxheSIsImFuaW1hdGUiLCJlbGVtZW50VmFsdWUiLCJmb3VuZEVsZW1lbnQiLCJmaW5kIiwiZmlsdGVyIiwicGFyZW50IiwicmVtb3ZlIiwiZXEiLCJub2RlQ29udGFpbmVyIiwiYWRkQ2xhc3MiLCJpbm5lckNvbnRhaW5lciIsIm5vZGVEYXRhIiwicGFyYWdyYXBoIiwidGV4dCIsImFwcGVuZCIsIm5leHRDb250YWluZXIiLCJuZXh0Tm9kZSIsImFycm93Q29udGFpbmVyIiwiYXJyb3ciLCJsaW5lIl0sInNvdXJjZVJvb3QiOiIifQ==