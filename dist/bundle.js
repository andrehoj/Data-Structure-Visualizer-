(()=>{"use strict";document.getElementById("insert-node-start"),document.getElementById("insert-node-end"),document.getElementById("ll-container"),new(function(){function e(){var e=this;this.head=null,this.removeNodeBtn=$("#remove-node-btn")[0],this.sizeDisplay=$("#size-display")[0],this.llContainer=$("#ll-container")[0],this.insertNodeAtIndexBtn=$("#insert-at-location")[0],this.size=$(this.llContainer).children(".node_container").length,this.sizeDisplay.textContent=this.size.toString(),$(this.insertNodeAtIndexBtn).on("click",(function(n){n.stopPropagation();var t=$("#insert-value-input"),i=parseInt(t.val()),o=$("#insert-index-input"),r=parseInt(o.val());e.insertAtIndex(i,r)})),$(this.removeNodeBtn).on("click",(function(n){try{n.stopPropagation();var t=parseInt($("#remove-index-input").val()),i=parseInt($("#remove-value-input").val());t&&e.removeFrom(t),i&&e.removeElement(i)}catch(e){console.log(e)}}))}return e.prototype.updateSize=function(){this.sizeDisplay.textContent=this.size.toString()},e.prototype.insertAtIndex=function(e,n){var t=this;if(!e)throw new Error("Invalid value");try{if(n>=2)this.walkthroughAnimation(n,(function(){var i=t.createLLDomNode(e);if(0===$(t.llContainer).children(".node_container").length)$(t.llContainer).children().first().after(i);else{if(n<0||n>t.size+1)throw new Error("invalid linkedList index");$(t.llContainer.children[0===n?1:n]).before(i)}t.size++,t.updateSize()}));else{var i=this.createLLDomNode(e);if(0===$(this.llContainer).children(".node_container").length)$(this.llContainer).children().first().after(i);else{if(n<0||n>this.size+1)throw new Error("invalid linkedList index");$(this.llContainer.children[0===n?1:n]).before(i)}this.size++,this.updateSize()}}catch(e){console.log(e)}},e.prototype.walkthroughAnimation=function(e,n){var t=$(".walkthrough-animation"),i=!1;t.each((function(t){if(e-1===t&&(i=!0),!i){var o=$(this);o.delay(800*t).animate({transform:"scale(1.2)",rotate:"5deg"},200,(function(){o.animate({transform:"scale(1)",rotate:"0deg"},200,(function(){console.log("insertionIndex = "+(e-1)),console.log("animationIndex = "+(t+1)),e-1===t+1&&n()}))}))}}))},e.prototype.removeElement=function(e){var n=$(this.llContainer).find("*:contains('"+e+"')").filter((function(){return 0===$(this).children().length}));console.log(n.parent().parent().parent().remove()),this.size--,this.updateSize()},e.prototype.removeFrom=function(e){if(e&&e>0){if($(this.llContainer).children().length<=2||e>this.size)throw new Error("there are no nodes inserted yet");$(this.llContainer).children().eq(e).remove(),this.size--,this.updateSize()}},e.prototype.createLLDomNode=function(e){var n=$("<div>").addClass("node_container walkthrough-animation"),t=$("<div>").addClass("node_inner_container"),i=$("<div>").addClass("node_data"),o=$("<p>").text(e.toString());i.append(o);var r=$("<div>").addClass("node_next_container"),a=$("<div>").addClass("node_next"),s=$("<div>").addClass("arrow-container"),l=$("<div>").addClass("arrow"),d=$("<div>").addClass("line");return s.append(l,d),a.append(s),r.append(a),t.append(i,r),n.append(t),n},e}())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVE1RCxFQUFFLFNBQVNtRCxTQUFTLFNBQzVCVSxFQUFPN0QsRUFBRSxTQUFTbUQsU0FBUyxRQU9qQyxPQUxBUSxFQUFlSCxPQUFPSSxFQUFPQyxHQUM3QkgsRUFBU0YsT0FBT0csR0FDaEJGLEVBQWNELE9BQU9FLEdBQ3JCTixFQUFlSSxPQUFPSCxFQUFVSSxHQUNoQ1AsRUFBY00sT0FBT0osR0FDZEYsQ0FDWCxFQUNKLEVBdExBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLXN0cnVjdHVyZS12aXN1YWxpemVyLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFkZE5vZGVCdG5TdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5zZXJ0LW5vZGUtc3RhcnRcIik7XHJcbmNvbnN0IGFkZE5vZGVCdG5FbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluc2VydC1ub2RlLWVuZFwiKTtcclxuY29uc3QgbGlua2VkTGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGwtY29udGFpbmVyXCIpO1xyXG5cclxuaW50ZXJmYWNlIE5vZGVUeXBlIHtcclxuICAgIHZhbHVlOiBudW1iZXI7XHJcbiAgICBuZXh0OiBudWxsIHwgTm9kZVR5cGVcclxufVxyXG5cclxuY2xhc3MgTExOb2RlIGltcGxlbWVudHMgTm9kZVR5cGUge1xyXG4gICAgdmFsdWU6IG51bWJlclxyXG4gICAgbmV4dDogbnVsbCB8IE5vZGVUeXBlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZhbDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbFxyXG4gICAgICAgIHRoaXMubmV4dCA9IG51bGxcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTGlua2VkTGlzdCB7XHJcbiAgICBoZWFkOiBMTE5vZGUgfCBudWxsXHJcbiAgICBzaXplOiBudW1iZXJcclxuICAgIGxsQ29udGFpbmVyXHJcbiAgICBpbnNlcnROb2RlQXRJbmRleEJ0bjogSFRNTEVsZW1lbnRcclxuICAgIHJlbW92ZU5vZGVCdG46IEhUTUxCdXR0b25FbGVtZW50XHJcbiAgICBzaXplRGlzcGxheTogSFRNTFNwYW5FbGVtZW50XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmhlYWQgPSBudWxsXHJcbiAgICAgICAgdGhpcy5yZW1vdmVOb2RlQnRuID0gJChcIiNyZW1vdmUtbm9kZS1idG5cIilbMF0gYXMgSFRNTEJ1dHRvbkVsZW1lbnRcclxuICAgICAgICB0aGlzLnNpemVEaXNwbGF5ID0gJChcIiNzaXplLWRpc3BsYXlcIilbMF0gYXMgSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgICAgIC8vIFNlbGVjdCBhbGwgZWxlbWVudHMgd2l0aCBjbGFzcyBuYW1lICdub2RlX2NvbnRhaW5lcicgaW5zaWRlIHRoZSBkaXYgd2l0aCBpZCAnbGwtY29udGFpbmVyJ1xyXG4gICAgICAgIC8vIFNlbGVjdGluZyBsbENvbnRhaW5lciB1c2luZyBqUXVlcnlcclxuICAgICAgICB0aGlzLmxsQ29udGFpbmVyID0gJChcIiNsbC1jb250YWluZXJcIilbMF0gYXMgSFRNTERpdkVsZW1lbnQ7IC8vIFVzaW5nIFswXSB0byBhY2Nlc3MgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGpRdWVyeSBvYmplY3QgYXMgYSBwbGFpbiBET00gZWxlbWVudFxyXG4gICAgICAgIC8vIFNlbGVjdGluZyBpbnNlcnROb2RlQXRJbmRleEJ0biB1c2luZyBqUXVlcnlcclxuICAgICAgICB0aGlzLmluc2VydE5vZGVBdEluZGV4QnRuID0gJChcIiNpbnNlcnQtYXQtbG9jYXRpb25cIilbMF07IC8vIFVzaW5nIFswXSB0byBhY2Nlc3MgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGpRdWVyeSBvYmplY3QgYXMgYSBwbGFpbiBET00gZWxlbWVudFxyXG4gICAgICAgIHRoaXMuc2l6ZSA9ICQodGhpcy5sbENvbnRhaW5lcikuY2hpbGRyZW4oJy5ub2RlX2NvbnRhaW5lcicpLmxlbmd0aFxyXG4gICAgICAgIHRoaXMuc2l6ZURpc3BsYXkudGV4dENvbnRlbnQgPSB0aGlzLnNpemUudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgLy8gQWRkaW5nIGV2ZW50IGxpc3RlbmVyIHVzaW5nIGpRdWVyeVxyXG4gICAgICAgICQodGhpcy5pbnNlcnROb2RlQXRJbmRleEJ0bikub24oJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVJbnB1dCA9ICQoXCIjaW5zZXJ0LXZhbHVlLWlucHV0XCIpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KHZhbHVlSW5wdXQudmFsKCkgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXhJbnB1dCA9ICQoXCIjaW5zZXJ0LWluZGV4LWlucHV0XCIpO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGluZGV4SW5wdXQudmFsKCkgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgdGhpcy5pbnNlcnRBdEluZGV4KHZhbHVlLCBpbmRleCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQodGhpcy5yZW1vdmVOb2RlQnRuKS5vbihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnlJbmRleCA9IHBhcnNlSW50KCQoXCIjcmVtb3ZlLWluZGV4LWlucHV0XCIpLnZhbCgpIGFzIHN0cmluZylcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ5VmFsdWUgPSBwYXJzZUludCgkKFwiI3JlbW92ZS12YWx1ZS1pbnB1dFwiKS52YWwoKSBhcyBzdHJpbmcpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJ5SW5kZXgpIHRoaXMucmVtb3ZlRnJvbShieUluZGV4KVxyXG4gICAgICAgICAgICAgICAgaWYgKGJ5VmFsdWUpIHRoaXMucmVtb3ZlRWxlbWVudChieVZhbHVlKVxyXG5cclxuXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU2l6ZSgpIHtcclxuICAgICAgICB0aGlzLnNpemVEaXNwbGF5LnRleHRDb250ZW50ID0gdGhpcy5zaXplLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIGFkZHMgYW4gbm9kZSB0byB0aGUgZW5kIG9mIHRoZSBsaXN0XHJcbiAgICBpbnNlcnRBdEluZGV4KHZhbHVlOiBudW1iZXIsIGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAoIXZhbHVlKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlXCIpXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID49IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2Fsa3Rocm91Z2hBbmltYXRpb24oaW5kZXgsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb21Ob2RlID0gdGhpcy5jcmVhdGVMTERvbU5vZGUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVzSW5MTCA9ICQodGhpcy5sbENvbnRhaW5lcikuY2hpbGRyZW4oJy5ub2RlX2NvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIC8vIGlmIGxlbmd0aCBpcyAyLCB0aGVyZSBpcyBvbmx5IGhlYWQgYW5kIHRhaWxcclxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZXNJbkxMLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMubGxDb250YWluZXIpLmNoaWxkcmVuKCkuZmlyc3QoKS5hZnRlcihkb21Ob2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gdGhpcy5zaXplICsgMSkgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBsaW5rZWRMaXN0IGluZGV4XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMubGxDb250YWluZXIuY2hpbGRyZW5baW5kZXggPT09IDAgPyAxIDogaW5kZXhdKS5iZWZvcmUoZG9tTm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSsrXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTaXplKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkb21Ob2RlID0gdGhpcy5jcmVhdGVMTERvbU5vZGUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZXNJbkxMID0gJCh0aGlzLmxsQ29udGFpbmVyKS5jaGlsZHJlbignLm5vZGVfY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgICAgICAvLyAvLyBpZiBsZW5ndGggaXMgMiwgdGhlcmUgaXMgb25seSBoZWFkIGFuZCB0YWlsXHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZXNJbkxMLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcy5sbENvbnRhaW5lcikuY2hpbGRyZW4oKS5maXJzdCgpLmFmdGVyKGRvbU5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gdGhpcy5zaXplICsgMSkgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBsaW5rZWRMaXN0IGluZGV4XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcy5sbENvbnRhaW5lci5jaGlsZHJlbltpbmRleCA9PT0gMCA/IDEgOiBpbmRleF0pLmJlZm9yZShkb21Ob2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSsrXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG5cclxuICAgIHdhbGt0aHJvdWdoQW5pbWF0aW9uKGluc2VydGlvbkluZGV4OiBudW1iZXIsIGluc2VydE5vZGU6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICAvLyBTZWxlY3QgYWxsIHNpYmxpbmcgZWxlbWVudHNcclxuICAgICAgICB2YXIgJHNpYmxpbmdzID0gJChcIi53YWxrdGhyb3VnaC1hbmltYXRpb25cIik7XHJcbiAgICAgICAgbGV0IHN0b3BBbmltYXRpb24gPSBmYWxzZVxyXG4gICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBlYWNoIHNpYmxpbmcgZWxlbWVudFxyXG4gICAgICAgICRzaWJsaW5ncy5lYWNoKGZ1bmN0aW9uIChhbmltYXRpb25JbmRleCkge1xyXG4gICAgICAgICAgICBpZiAoaW5zZXJ0aW9uSW5kZXggLSAxID09PSBhbmltYXRpb25JbmRleCkge1xyXG4gICAgICAgICAgICAgICAgc3RvcEFuaW1hdGlvbiA9IHRydWVcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghc3RvcEFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdmFyICRjdXJyZW50RWxlbWVudCA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAvLyBEZWZpbmUgdGhlIGFuaW1hdGlvblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAkY3VycmVudEVsZW1lbnQuZGVsYXkoYW5pbWF0aW9uSW5kZXggKiA4MDApLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNjYWxlIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc2Zvcm1cIjogXCJzY2FsZSgxLjIpXCIsIC8vIFNjYWxlIGZhY3RvciBjYW4gYmUgYWRqdXN0ZWQgYXMgbmVlZGVkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUm90YXRlIHRoZSBlbGVtZW50IHNsaWdodGx5IHRvIG9uZSBzaWRlXHJcbiAgICAgICAgICAgICAgICAgICAgXCJyb3RhdGVcIjogXCI1ZGVnXCIgLy8gQW5nbGUgY2FuIGJlIGFkanVzdGVkIGFzIG5lZWRlZFxyXG4gICAgICAgICAgICAgICAgfSwgMjAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQW5pbWF0aW9uIGNvbXBsZXRlIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQW5pbWF0ZSBiYWNrIHRvIG9yaWdpbmFsIHN0eWxlc1xyXG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50RWxlbWVudC5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc2Zvcm1cIjogXCJzY2FsZSgxKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJvdGF0ZVwiOiBcIjBkZWdcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImluc2VydGlvbkluZGV4ID0gXCIgKyAoaW5zZXJ0aW9uSW5kZXggLSAxKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhbmltYXRpb25JbmRleCA9IFwiICsgKGFuaW1hdGlvbkluZGV4ICsgMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnRpb25JbmRleCAtIDEgPT09IGFuaW1hdGlvbkluZGV4ICsgMSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydE5vZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlRWxlbWVudChlbGVtZW50VmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHZhciBmb3VuZEVsZW1lbnQgPSAkKHRoaXMubGxDb250YWluZXIpLmZpbmQoXCIqOmNvbnRhaW5zKCdcIiArIGVsZW1lbnRWYWx1ZSArIFwiJylcIikuZmlsdGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICQodGhpcykuY2hpbGRyZW4oKS5sZW5ndGggPT09IDA7IC8vIEZpbHRlciB0byBzZWxlY3Qgb25seSB0aGUgaW5uZXJtb3N0IGVsZW1lbnRzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coZm91bmRFbGVtZW50LnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZSgpKVxyXG4gICAgICAgIHRoaXMuc2l6ZS0tO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJlbW92ZUZyb20oaW5kZXg6IG51bWJlcikge1xyXG5cclxuICAgICAgICBpZiAoIWluZGV4KSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChpbmRleCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgbGxDaGlsZHJlbiA9ICQodGhpcy5sbENvbnRhaW5lcikuY2hpbGRyZW4oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsbENoaWxkcmVuLmxlbmd0aCA8PSAyIHx8IGluZGV4ID4gdGhpcy5zaXplKSB0aHJvdyBuZXcgRXJyb3IoXCJ0aGVyZSBhcmUgbm8gbm9kZXMgaW5zZXJ0ZWQgeWV0XCIpXHJcblxyXG4gICAgICAgICAgICAkKHRoaXMubGxDb250YWluZXIpLmNoaWxkcmVuKCkuZXEoaW5kZXgpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaXplLS1cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTaXplKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVMTERvbU5vZGUodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbWFpbiBjb250YWluZXIgZGl2XHJcbiAgICAgICAgY29uc3Qgbm9kZUNvbnRhaW5lciA9ICQoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcIm5vZGVfY29udGFpbmVyIHdhbGt0aHJvdWdoLWFuaW1hdGlvblwiKTtcclxuICAgICAgICAvLyBDcmVhdGUgaW5uZXIgY29udGFpbmVyIGRpdlxyXG4gICAgICAgIGNvbnN0IGlubmVyQ29udGFpbmVyID0gJChcIjxkaXY+XCIpLmFkZENsYXNzKFwibm9kZV9pbm5lcl9jb250YWluZXJcIik7XHJcbiAgICAgICAgLy8gQ3JlYXRlIG5vZGUgZGF0YSBkaXZcclxuICAgICAgICBjb25zdCBub2RlRGF0YSA9ICQoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcIm5vZGVfZGF0YVwiKTtcclxuICAgICAgICBjb25zdCBwYXJhZ3JhcGggPSAkKFwiPHA+XCIpLnRleHQodmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgbm9kZURhdGEuYXBwZW5kKHBhcmFncmFwaCk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIG5leHQgY29udGFpbmVyIGRpdlxyXG4gICAgICAgIGNvbnN0IG5leHRDb250YWluZXIgPSAkKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJub2RlX25leHRfY29udGFpbmVyXCIpO1xyXG4gICAgICAgIC8vIENyZWF0ZSBuZXh0IG5vZGUgZGl2XHJcbiAgICAgICAgY29uc3QgbmV4dE5vZGUgPSAkKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJub2RlX25leHRcIik7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGFycm93IGNvbnRhaW5lciBkaXZcclxuICAgICAgICBjb25zdCBhcnJvd0NvbnRhaW5lciA9ICQoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcImFycm93LWNvbnRhaW5lclwiKTtcclxuICAgICAgICAvLyBDcmVhdGUgYXJyb3cgZGl2XHJcbiAgICAgICAgY29uc3QgYXJyb3cgPSAkKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJhcnJvd1wiKTtcclxuICAgICAgICBjb25zdCBsaW5lID0gJChcIjxkaXY+XCIpLmFkZENsYXNzKFwibGluZVwiKTtcclxuICAgICAgICAvLyBBcHBlbmQgZWxlbWVudHMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBwYXJlbnRzXHJcbiAgICAgICAgYXJyb3dDb250YWluZXIuYXBwZW5kKGFycm93LCBsaW5lKTtcclxuICAgICAgICBuZXh0Tm9kZS5hcHBlbmQoYXJyb3dDb250YWluZXIpO1xyXG4gICAgICAgIG5leHRDb250YWluZXIuYXBwZW5kKG5leHROb2RlKTtcclxuICAgICAgICBpbm5lckNvbnRhaW5lci5hcHBlbmQobm9kZURhdGEsIG5leHRDb250YWluZXIpO1xyXG4gICAgICAgIG5vZGVDb250YWluZXIuYXBwZW5kKGlubmVyQ29udGFpbmVyKTtcclxuICAgICAgICByZXR1cm4gbm9kZUNvbnRhaW5lcjtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgbGwgPSBuZXcgTGlua2VkTGlzdCgpO1xyXG4iXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRoaXMiLCJoZWFkIiwicmVtb3ZlTm9kZUJ0biIsIiQiLCJzaXplRGlzcGxheSIsImxsQ29udGFpbmVyIiwiaW5zZXJ0Tm9kZUF0SW5kZXhCdG4iLCJzaXplIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJ0ZXh0Q29udGVudCIsInRvU3RyaW5nIiwib24iLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwidmFsdWVJbnB1dCIsInZhbHVlIiwicGFyc2VJbnQiLCJ2YWwiLCJpbmRleElucHV0IiwiaW5kZXgiLCJpbnNlcnRBdEluZGV4IiwiYnlJbmRleCIsImJ5VmFsdWUiLCJyZW1vdmVGcm9tIiwicmVtb3ZlRWxlbWVudCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZVNpemUiLCJFcnJvciIsIndhbGt0aHJvdWdoQW5pbWF0aW9uIiwiZG9tTm9kZSIsImNyZWF0ZUxMRG9tTm9kZSIsImZpcnN0IiwiYWZ0ZXIiLCJiZWZvcmUiLCJpbnNlcnRpb25JbmRleCIsImluc2VydE5vZGUiLCIkc2libGluZ3MiLCJzdG9wQW5pbWF0aW9uIiwiZWFjaCIsImFuaW1hdGlvbkluZGV4IiwiJGN1cnJlbnRFbGVtZW50IiwiZGVsYXkiLCJhbmltYXRlIiwiZWxlbWVudFZhbHVlIiwiZm91bmRFbGVtZW50IiwiZmluZCIsImZpbHRlciIsInBhcmVudCIsInJlbW92ZSIsImVxIiwibm9kZUNvbnRhaW5lciIsImFkZENsYXNzIiwiaW5uZXJDb250YWluZXIiLCJub2RlRGF0YSIsInBhcmFncmFwaCIsInRleHQiLCJhcHBlbmQiLCJuZXh0Q29udGFpbmVyIiwibmV4dE5vZGUiLCJhcnJvd0NvbnRhaW5lciIsImFycm93IiwibGluZSJdLCJzb3VyY2VSb290IjoiIn0=